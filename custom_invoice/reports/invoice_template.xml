<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <template id="custom_invoice_template">
    <t t-call="web.external_layout">
      <t t-foreach="docs" t-as="o">
      <main class="page">
        <!-- Header -->
        <div class="row mb-4">
          <div class="col-6">
            <strong style="font-size: 16px;">PT. LIMAWIRA WISESA</strong><br/>
            <span>Graha Mas Pemuda Blok AA No15</span><br/>
            <span>Jalan Pemuda</span><br/>
            <span>Jakarta Timur JK 13220</span><br/>
            <span>Indonesia</span>
          </div>

          <div class="col-6 text-right">
            <strong style="font-size: 16px;">TO:</strong><br/>
            <span t-field="o.partner_id.name"/><br/>
            <span t-field="o.partner_id.street"/><br/>
            <t t-if="o.partner_id.street2">
              <span t-field="o.partner_id.street2"/><br/>
            </t>
            <t t-if="o.partner_id.city">
              <span t-field="o.partner_id.city"/>,
            </t>
            <span t-field="o.partner_id.state_id.code"/>
            <span t-field="o.partner_id.zip"/><br/>
            <span t-field="o.partner_id.country_id.name"/>
          </div>
        </div>

        <hr style="border-top: 1px solid black;"/>

        <!-- Invoice Title & Info -->
        <div class="row mb-2">
          <div class="col-12">
            <h2 style="font-size: 18px;"><strong>Invoice <t t-esc="o.name"/></strong></h2>
          </div>
        </div>

        <div class="row mb-3">
          <table class="table table-borderless" style="width: 100%;">
            <tr>
              <td style="width: 25%;"><strong>Invoice Date</strong></td>
              <td style="width: 25%;"><span t-field="o.invoice_date" t-options='{"format": "d MMMM yyyy"}'/></td>
              <td style="width: 25%;"><strong>Delivery Date</strong></td>
              <td style="width: 25%;"><span t-field="o.invoice_date_due" t-options='{"format": "d/MM/yyyy"}'/></td>
            </tr>
            <tr>
              <td><strong>Source</strong></td>
              <td><span t-field="o.invoice_origin"/></td>
              <td><strong>Reference</strong></td>
              <td><span t-field="o.ref"/></td>
            </tr>
          </table>
        </div>

        <!-- Line Items -->
        <div class="row mb-4">
          <div class="col-12">
            <table class="table table-sm" style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr style="border-bottom: 1px solid black;">
                  <th style="text-align: left; padding: 5px;">Description</th>
                  <th style="text-align: right; padding: 5px;">Quantity</th>
                  <th style="text-align: right; padding: 5px;">Unit Price</th>
                  <th style="text-align: right; padding: 5px;">Amount</th>
                </tr>
              </thead>
              <tbody>
                <t t-foreach="o.invoice_line_ids" t-as="line">
                  <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 5px;">
                      <t t-if="line.product_id.default_code">
                        [<t t-esc="line.product_id.default_code"/>] 
                      </t>
                      <span t-esc="line.name"/>
                    </td>
                    <td style="text-align: right; padding: 5px;">
                      <span t-esc="'{:.2f}'.format(line.quantity)"/> 
                      <span t-esc="line.product_uom_id.name"/>
                    </td>
                    <td style="text-align: right; padding: 5px;">
                      <span t-field="line.price_unit" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                    </td>
                    <td style="text-align: right; padding: 5px;">
                      <span t-field="line.price_subtotal" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                    </td>
                  </tr>
                </t>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Total Summary -->
        <div class="row justify-content-end mb-3">
          <div class="col-6">
            <table class="table table-sm" style="width: 100%;">
              <tr>
                <td><strong>Untaxed Amount</strong></td>
                <td style="text-align: right;">
                  <span t-field="o.amount_untaxed" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                </td>
              </tr>
              <tr>
                <td><strong>Taxes</strong></td>
                <td style="text-align: right;">
                  <span t-field="o.amount_tax" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                </td>
              </tr>
              <tr>
                <td><strong>Total</strong></td>
                <td style="text-align: right; font-weight: bold;">
                  <span t-field="o.amount_total" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                </td>
              </tr>
            </table>
          </div>
        </div>
        
        <!-- Footer -->
        <div class="row mt-4" style="border-top: 1px solid #eee; padding-top: 10px;">
          <div class="col-12 text-center">
            <span t-field="o.company_id.phone"/> 
            <span t-field="o.company_id.email"/> 
            Page 1 / 1
          </div>
        </div>
        </main>
      </t>
    </t>
  </template>
</odoo>