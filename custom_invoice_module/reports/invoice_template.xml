<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <template id="invoice_template">
    <t t-call="web.external_layout">
      <t t-foreach="docs" t-as="o">
        <main>
          <!-- HEADER: Logo & Company Info on top right -->
          <div class="row" style="margin-bottom: 30px;">
            <div class="col-7"></div>
            <div class="col-5" style="text-align: right;">
              <img t-if="o.company_id.logo" t-att-src="'data:image/png;base64,%s' % o.company_id.logo.decode()" style="max-width: 180px; height: auto; margin-bottom: 5px;"/>
              <div style="font-size: 12px; line-height: 1.5; text-align: right;">
                <span t-esc="o.company_id.name"/><br/>
                <span t-esc="o.company_id.street"/><br/>
                <span t-esc="o.company_id.city"/> - <span t-esc="o.company_id.zip"/>, <span t-esc="o.company_id.country_id.name"/><br/>
                Telepon: <span t-esc="o.company_id.phone"/>
                <t t-if="o.company_id.mobile"> | Fax: <span t-esc="o.company_id.mobile"/></t>
              </div>
            </div>
          </div>

          <!-- TO Section on left with about 75% width -->
          <div class="row" style="margin-bottom: 30px;">
            <div class="col-9" style="max-width: 75%;">
              <span style="font-weight: bold; font-size: 15px;">TO :</span><br/>
              <span t-field="o.partner_id.name"/><br/>
              <span t-field="o.partner_id.street"/><br/>
              <span t-field="o.partner_id.street2" t-if="o.partner_id.street2"/><br t-if="o.partner_id.street2"/>
              <span t-field="o.partner_id.city"/>
              <span t-field="o.partner_id.state_id.name"/>
              <span t-field="o.partner_id.zip"/><br/>
              <span t-field="o.partner_id.country_id.name"/>
            </div>
          </div>

          <!-- INVOICE TITLE -->
          <div style="margin-bottom: 10px;">
            <span style="font-size: 28px; color: #6c5a7c; font-weight: 400;">Invoice <span t-esc="o.name"/></span>
          </div>

          <!-- INVOICE INFO TABLE (borderless) -->
          <table style="width: 100%; margin-bottom: 10px; border-collapse: collapse; border: none;">
            <tr>
              <td style="font-weight: bold; border: none;">Invoice Date</td>
              <td style="font-weight: bold; border: none;">Delivery Date</td>
              <td style="font-weight: bold; border: none;">Source</td>
              <td style="font-weight: bold; border: none;">Reference</td>
            </tr>
            <tr>
              <td style="border: none;"><span t-field="o.invoice_date"/></td>
              <td style="border: none;"><span t-field="o.invoice_date_due"/></td>
              <td style="border: none;"><span t-esc="o.invoice_origin or ''"/></td>
              <td style="border: none;"><span t-esc="o.ref or ''"/></td>
            </tr>
          </table>

          <!-- PRODUCT LINES TABLE (borderless except single horizontal line under header) -->
          <table class="table table-sm" style="width: 100%; border-collapse: collapse; margin-bottom: 20px; border: none;">
            <thead>
              <tr style="border-bottom: 1px solid #000;">
                <th style="text-align: left; font-weight: bold; border: none;">Description</th>
                <th style="text-align: right; font-weight: bold; border: none;">Quantity</th>
                <th style="text-align: right; font-weight: bold; border: none;">Unit Price</th>
                <th style="text-align: right; font-weight: bold; border: none;">Amount</th>
              </tr>
            </thead>
            <tbody>
              <t t-foreach="o.invoice_line_ids" t-as="line">
                <tr>
                  <td style="border: none;"><span t-field="line.name"/></td>
                  <td style="text-align: right; border: none;"><span t-field="line.quantity"/> <span t-esc="line.product_uom_id.name"/></td>
                  <td style="text-align: right; border: none;"><span t-field="line.price_unit" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></td>
                  <td style="text-align: right; border: none;"><span t-field="line.price_subtotal" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></td>
                </tr>
              </t>
            </tbody>
          </table>

          <!-- TOTALS TABLE (borderless) -->
          <table style="width: 40%; float: right; border-collapse: collapse; border: none;">
            <tr>
              <td style="text-align: right; border: none;">Untaxed Amount</td>
              <td style="text-align: right; border: none;"><span t-field="o.amount_untaxed" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></td>
            </tr>
            <tr>
              <td style="text-align: right; border: none;">Taxes</td>
              <td style="text-align: right; border: none;"><span t-field="o.amount_tax" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></td>
            </tr>
            <tr>
              <td style="text-align: right; font-weight: bold; border: none;">Total</td>
              <td style="text-align: right; font-weight: bold; border: none;"><span t-field="o.amount_total" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></td>
            </tr>
          </table>
        </main>
      </t>
    </t>
  </template>
</odoo>
