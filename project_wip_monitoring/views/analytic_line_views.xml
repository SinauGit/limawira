<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- List View for WIP Project Analytic Items -->
        <record id="view_account_analytic_line_list_wip" model="ir.ui.view">
            <field name="name">account.analytic.line.list.wip</field>
            <field name="model">account.analytic.line</field>
            <field name="arch" type="xml">
                <list string="WIP Project Analytic Items" 
                      create="false" 
                      edit="false" 
                      delete="false"
                      expand="0"
                      decoration-bf="1">
                    <field name="date"/>
                    <field name="display_name" string="Description"/>
                    <field name="account_id" string="Project"/>
                    <field name="account_id" string="Project 2" optional="hide"/>
                    <field name="account_id" string="project 3" optional="hide"/>
                    <field name="company_id"/>
                    <field name="amount" sum="Total"/>
                    <field name="ref" optional="hide"/>
                    <field name="move_line_id" optional="hide"/>
                    <field name="general_account_id" column_invisible="1"/>
                </list>
            </field>
        </record>

        <!-- Search View for WIP Project Analytic Items -->
        <record id="view_account_analytic_line_search_wip" model="ir.ui.view">
            <field name="name">account.analytic.line.search.wip</field>
            <field name="model">account.analytic.line</field>
            <field name="arch" type="xml">
                <search string="Search WIP Project Analytic Items">
                    <field name="name" string="Description"/>
                    <field name="date"/>
                    <field name="account_id" string="Project"/>
                    <field name="general_account_id" string="Financial Account"/>
                    <field name="ref"/>
                    <field name="move_line_id"/>
                    <field name="company_id"/>
                    
                    <filter string="Today" name="today"
                            domain="[('date','=',context_today().strftime('%Y-%m-%d'))]"/>
                    <filter string="This Month" name="month"
                            domain="[('date','&gt;=',context_today().strftime('%Y-%m-01'))]"/>

                    <filter string="Non-Zero Projects" name="non_zero_projects"
                            domain="[('account_id', 'in', [])]"/>
                    
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter string="Date" name="group_date" context="{'group_by':'date'}"/>
                        <filter string="Project" name="group_project" context="{'group_by':'account_id'}"/>
                        <filter string="Reference" name="group_ref" context="{'group_by':'ref'}"/>
                        <filter string="Journal Item" name="group_journal_item" context="{'group_by':'move_line_id'}"/>
                        <filter string="Company" name="group_company" context="{'group_by':'company_id'}"/>
                    </group>
                </search>
            </field>
        </record>


        <record id="action_account_analytic_line_wip" model="ir.actions.act_window">
            <field name="name">WIP Project Monitoring</field>
            <field name="res_model">account.analytic.line</field>
            <field name="view_mode">list,kanban,form,graph,pivot,grid</field>
            <field name="domain">[('general_account_id.code', '=', '1061')]</field>
            <field name="context">{
                'group_by': ['account_id', 'ref', 'move_line_id'],
                'create': False,
                'edit': False,
                'delete': False,
                'hide_breadcrumbs': True,
                'filter_zero_amount_projects': True,
            }</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'list', 'view_id': ref('view_account_analytic_line_list_wip')}),
                (0, 0, {'view_mode': 'kanban', 'view_id': ref('analytic.view_account_analytic_line_kanban')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('analytic.view_account_analytic_line_form')}),
                (0, 0, {'view_mode': 'graph', 'view_id': ref('analytic.view_account_analytic_line_graph')}),
                (0, 0, {'view_mode': 'grid', 'view_id': ref('analytic_enterprise.account_analytic_line_report_view_grid')}),
                (0, 0, {'view_mode': 'pivot', 'view_id': ref('analytic.view_account_analytic_line_pivot')})]"/>
            <field name="search_view_id" ref="view_account_analytic_line_search_wip"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No WIP Project Monitoring found.
                </p>
                <p>
                    This view shows Wip Project Monitoring filtered by account code '1061' (WIP Project).
                </p>
            </field>
        </record>

    </data>
</odoo>